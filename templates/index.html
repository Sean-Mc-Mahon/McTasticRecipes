{% extends "base.html" %}
{% block content %}

    <!--SEARCH-->
    <div class="vm1 container mt1">
        <div class="row">
            <form class="col s8" action="{{ url_for('search', sort_by=sort_by, query=query) }}" method="post">
                <div class="input-field flex">
                    <input type="text" name="query" id="query" minlength="3" class="validate" required>
                    <label class="flex-space" for="query">Search Recipes</label>
                    <button id="search-button"  type="submit" class="transparent blue-grey-text text-darken-3 no-border"><i class="fas fa-search left"></i>
                    </button>
                </div>
            </form>
            <div class="input-field col s4">
            {% if query %}
                <form action="{{ url_for('sort_query', sort_by=sort_by, query=query, recipes=recipes) }}" method="POST" >
            {% else %}
                <form action="{{ url_for('sort', sort_by=sort_by, query=query, recipes=recipes) }}" method="POST" >
            {% endif %}
                    <select id="sort_by" name="sort_by" onchange="this.form.submit()">
                        <option value="" disabled selected>Sort By</option>
                        <option value="az">A-Z</option>
                        <option value="za">Z-A</option>
                        <option value="newest">Newest</option>
                        <option value="oldest">Oldest</option>
                    </select>
                </form>
            </div>
        </div>
    </div>

    {% if number_of_all_rec > 0 %}
    <!--Recipe Cards-->
    <div class="row container">
        {% if query %}
        <h5 class="m-all center-align">{{ number_of_all_rec }} Results for {{ query }}</h5>
        {% endif %}
        {% for recipe in recipes %}
            {% include "partials/recipe_cards.html" %}
            {% include "partials/recipe_cards_lg.html" %}
        {% endfor %}
    </div>

    <!--PAGINATION-->
    <ul class="pagination center-align margin-bottom-large">
        <h5>{{ number_of_all_rec }} Recipes</h5>
        {% for page_num in pages %} 
            {% if page_num == current_page %}
            <li class="active"><a>{{ page_num }}</a></li>
            {% else %}
            <li class="waves-effect">
                {% if title == 'McTastic Recipes' %}
                    <a href="{{ url_for('recipes', query=query, sort_by=sort_by, current_page=page_num) }}">{{ page_num }}</a>
                {% elif title == 'McTastic Search' %}
                    <a href="{{ url_for('search', query=query, sort_by=sort_by, current_page=page_num) }}">{{ page_num }}</a>
                {% elif title == 'McTastic Recipes Sort' %}
                    <a href="{{ url_for('sort', query=query, sort_by=sort_by, current_page=page_num) }}">{{ page_num }}</a>
                {% elif title == 'McTastic Recipes Search Sort' %}
                    <a href="{{ url_for('sort_query', query=query, sort_by=sort_by, current_page=page_num) }}">{{ page_num }}</a>
                {% endif %}
            </li>
            {% endif %} 
        {% endfor %}
    </ul>
    {% else %}
        <h3 class="center-align">No Results Found for {{ query }}</h3>
    {% endif %}


{% endblock %}