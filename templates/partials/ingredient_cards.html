<!--Ingredients dispalyed in a collapsible-->
<!--Ingredients-->
<section class="container">
    <div class="flex-col">
        <h4 class="center">Ingredient <br> Calories</h4>
        <div class="edit-btns flex-center mb-half">
            <!-- 'Add' option if user is logged in -->
            {% if session.user %}
                <!-- Modal Trigger -->
                <a class="waves-effect waves-light btn-small modal-trigger transparent btn-outline flat hoverable" href="#modal1">Add</a>
                <!-- Modal Structure -->
                <div id="modal1" class="modal ingredient_modal card-outline">
                    <div class="modal-content">
                        <form class="col s12" method="POST" action="{{ url_for('insert_ingredient') }}">
                            <div class="row">
                                <!-- Ingredient Name -->
                                <div class="input-field col s12 l6">
                                    <input id="ingredient_name" name="ingredient_name" type="text" minlength="1" maxlength="21" class="validate" required>
                                    <label for="ingredient_name">Ingredient Name *</label>
                                </div>
                                <!-- Food Group Selection -->
                                <div class="input-field col s12 l6">
                                    <select id="group_name" name="group_name" class="validate" required>
                                        <option value="" disabled selected>Choose Food Group *</option>
                                        {% for group in food_groups %}
                                            <option value="{{ group.group_name }}">{{ group.group_name }}</option>
                                        {% endfor %}
                                    </select>
                                </div>
                                <!-- Calories -->
                                <div class="input-field col s12 m6">
                                    <input id="ingredient_cal" name="ingredient_cal" type="number" minlength="1" max="9999" pattern="^[0-9]$" class="validate">
                                    <label for="ingredient_cal">Calories</label>
                                </div>
                                <!-- Unit Selection -->
                                <div class="input-field col s12 m6">
                                    <select id="unit_name" name="unit_name" class="validate" required>
                                        <option value="" disabled selected>Choose Units *</option>
                                        {% for unit in units %}
                                            <option value="{{ unit.unit_name }}">{{ unit.unit_name }}</option>
                                        {% endfor %}
                                    </select>
                                </div>
                            </div>
                            <!-- Modal Footer Buttons -->
                            <div class="modal-footer flex-center">
                                <a href="#!" class="modal-close waves-effect waves-green btn transparent btn-outline m-all flat hoverable mh1">Cancel</a>
                                <span class="mh1"></span>
                                <button class="btn waves-effect waves-light transparent btn-outline mh1" id="submit_ingredient" type="submit" name="action">
                                    Add
                                    <i class="fas fa-plus"></i>
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            <!-- If not logged in prompt user to login or register to add ingredients -->
            {% else %}
                <em><a id="login" href="{{ url_for('login')}}">Log In</a> or <a id="register" href="{{ url_for('register')}}">Register</a> to add Ingredients.</em>
            {% endif %}
        </div>
    </div>
    <ul class="collapsible popout">
        <!-- Fruit Card -->
        <li>
            <div class="collapsible-header"><i class="material-icons">expand_more</i>Fruit</div>
            <div class="collapsible-body">
                {% for ingredient in fruit_ingredients %}
                    <div class="col s12 l6 card horizontal">
                        <div class="card-content w100">
                            <div class="ingredient flex-wrap">
                                <div class="flex">
                                    <h6>{{ ingredient.ingredient_name }}</h6>
                                    <p>{{ ingredient.ingredient_cal }} kcal/{{ ingredient.unit_name }}</p>
                                </div>
                                {% if session.user|lower == ingredient.created_by|lower or session.user|lower == 'admin' %}
                                <div class="flex-right">
                                    <!-- Only Admin may view Created by -->
                                    {% if session.user|lower == 'admin' %}
                                        <em class="mh-half">{{ ingredient.created_by }}</em>
                                    <!-- Only Ingredient Creator may edit ingredient -->
                                    {% else %}
                                        <a class="mh-half waves-effect waves-light btn-small modal-trigger transparent btn-outline flat hoverable" href="#modal1">Edit</a>
                                    {% endif %}
                                    <!-- Only Admin or Ingredient Creator may delete ingredient -->
                                    <a class="waves-effect waves-light btn-small modal-trigger transparent btn-outline flat hoverable delete-use" href="{{ url_for('delete_ingredient', ingredient_id=ingredient._id) }}">
                                    Delete
                                    </a>
                                </div>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                {% endfor %}
            </div>
        </li>
        <!-- Grains Card -->
        <li>
            <div class="collapsible-header"><i class="material-icons">expand_more</i>Grains</div>
            <div class="collapsible-body">
                {% for ingredient in grain_ingredients %}
                    <div class="col s12 l6 card horizontal">
                        <div class="card-content  w100">
                            <div class="ingredient flex-wrap">
                                <div class="flex">
                                    <h6>{{ ingredient.ingredient_name }}</h6>
                                    <p>{{ ingredient.ingredient_cal }} kcal/{{ ingredient.unit_name }}</p>
                                </div>
                                {% if session.user|lower == ingredient.created_by|lower or session.user|lower == 'admin' %}
                                <div class="flex-right">
                                    <!-- Only Admin may view Created by -->
                                    {% if session.user|lower == 'admin' %}
                                        <em class="mh-half">{{ ingredient.created_by }}</em>
                                    <!-- Only Ingredient Creator may edit ingredient -->
                                    {% else %}
                                        <a class="mh-half waves-effect waves-light btn-small modal-trigger transparent btn-outline flat hoverable" href="#modal1">Edit</a>
                                    {% endif %}
                                    <!-- Only Admin or Ingredient Creator may delete ingredient -->
                                    <a class="waves-effect waves-light btn-small modal-trigger transparent btn-outline flat hoverable delete-use" href="{{ url_for('delete_ingredient', ingredient_id=ingredient._id) }}">
                                    Delete
                                    </a>
                                </div>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                {% endfor %}
            </div>
        </li>
        <!-- Proteins Card -->
        <li>
            <div class="collapsible-header"><i class="material-icons">expand_more</i>Proteins</div>
            <div class="collapsible-body">
                {% for ingredient in protein_ingredients %}
                    <div class="col s12 l6 card horizontal">
                        <div class="card-content w100">
                            <div class="ingredient flex-wrap">
                                <div class="flex">
                                    <h6>{{ ingredient.ingredient_name }}</h6>
                                    <p>{{ ingredient.ingredient_cal }} kcal/{{ ingredient.unit_name }}</p>
                                </div>
                                {% if session.user|lower == ingredient.created_by|lower or session.user|lower == 'admin' %}
                                <div class="flex-right">
                                    <!-- Only Admin may view Created by -->
                                    {% if session.user|lower == 'admin' %}
                                        <em class="mh-half">{{ ingredient.created_by }}</em>
                                    <!-- Only Ingredient Creator may edit ingredient -->
                                    {% else %}
                                        <a class="mh-half waves-effect waves-light btn-small modal-trigger transparent btn-outline flat hoverable" href="#modal1">Edit</a>
                                    {% endif %}
                                    <!-- Only Admin or Ingredient Creator may delete ingredient -->
                                    <a class="waves-effect waves-light btn-small modal-trigger transparent btn-outline flat hoverable delete-use" href="{{ url_for('delete_ingredient', ingredient_id=ingredient._id) }}">
                                    Delete
                                    </a>
                                </div>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                {% endfor %}
            </div>
        </li>
        <!-- Spices & Oils Card -->
        <li>
            <div class="collapsible-header"><i class="material-icons">expand_more</i>Spices & Oils</div>
            <div class="collapsible-body">
                {% for ingredient in spice_ingredients %}
                    <div class="col s12 l6 card horizontal">
                        <div class="card-content w100">
                            <div class="ingredient flex-wrap">
                                <div class="flex">
                                    <h6>{{ ingredient.ingredient_name }}</h6>
                                    <p>{{ ingredient.ingredient_cal }} kcal/{{ ingredient.unit_name }}</p>
                                </div>
                                {% if session.user|lower == ingredient.created_by|lower or session.user|lower == 'admin' %}
                                <div class="flex-right">
                                    <!-- Only Admin may view Created by -->
                                    {% if session.user|lower == 'admin' %}
                                        <em class="mh-half">{{ ingredient.created_by }}</em>
                                    <!-- Only Ingredient Creator may edit ingredient -->
                                    {% else %}
                                        <a class="mh-half waves-effect waves-light btn-small modal-trigger transparent btn-outline flat hoverable" href="#modal1">Edit</a>
                                    {% endif %}
                                    <!-- Only Admin or Ingredient Creator may delete ingredient -->
                                    <a class="waves-effect waves-light btn-small modal-trigger transparent btn-outline flat hoverable delete-use" href="{{ url_for('delete_ingredient', ingredient_id=ingredient._id) }}">
                                    Delete
                                    </a>
                                </div>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                {% endfor %}
            </div>
        </li>
        <!-- Sweet Card -->
        <li>
            <div class="collapsible-header"><i class="material-icons">expand_more</i>Sweet</div>
            <div class="collapsible-body">
                {% for ingredient in sweet_ingredients %}
                    <div class="col s12 l6 card horizontal">
                        <div class="card-content w100">
                            <div class="ingredient flex-wrap">
                                <div class="flex">
                                    <h6>{{ ingredient.ingredient_name }}</h6>
                                    <p>{{ ingredient.ingredient_cal }} kcal/{{ ingredient.unit_name }}</p>
                                </div>
                                {% if session.user|lower == ingredient.created_by|lower or session.user|lower == 'admin' %}
                                <div class="flex-right">
                                    <!-- Only Admin may view Created by -->
                                    {% if session.user|lower == 'admin' %}
                                        <em class="mh-half">{{ ingredient.created_by }}</em>
                                    <!-- Only Ingredient Creator may edit ingredient -->
                                    {% else %}
                                        <a class="mh-half waves-effect waves-light btn-small modal-trigger transparent btn-outline flat hoverable" href="#modal1">Edit</a>
                                    {% endif %}
                                    <!-- Only Admin or Ingredient Creator may delete ingredient -->
                                    <a class="waves-effect waves-light btn-small modal-trigger transparent btn-outline flat hoverable delete-use" href="{{ url_for('delete_ingredient', ingredient_id=ingredient._id) }}">
                                    Delete
                                    </a>
                                </div>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                {% endfor %}
            </div>
        </li>
        <!-- Veg Card -->
        <li>
            <div class="collapsible-header"><i class="material-icons">expand_more</i>Vegetables</div>
            <div class="collapsible-body">
                {% for ingredient in veg_ingredients %}
                    <div class="col s12 l6 card horizontal">
                        <div class="card-content w100">
                            <div class="ingredient flex-wrap">
                                <div class="flex">
                                    <h6>{{ ingredient.ingredient_name }}</h6>
                                    <p>{{ ingredient.ingredient_cal }} kcal/{{ ingredient.unit_name }}</p>
                                </div>
                                {% if session.user|lower == ingredient.created_by|lower or session.user|lower == 'admin' %}
                                <div class="flex-right">
                                    <!-- Only Admin may view Created by -->
                                    {% if session.user|lower == 'admin' %}
                                        <em class="mh-half">{{ ingredient.created_by }}</em>
                                    <!-- Only Ingredient Creator may edit ingredient -->
                                    {% else %}
                                        <a class="mh-half waves-effect waves-light btn-small modal-trigger transparent btn-outline flat hoverable" href="#modal1">Edit</a>
                                    {% endif %}
                                    <!-- Only Admin or Ingredient Creator may delete ingredient -->
                                    <a class="waves-effect waves-light btn-small modal-trigger transparent btn-outline flat hoverable delete-use" href="{{ url_for('delete_ingredient', ingredient_id=ingredient._id) }}">
                                    Delete
                                    </a>
                                </div>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                {% endfor %}
            </div>
        </li>
    </ul>
</section>